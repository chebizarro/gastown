# =============================================================================
# Gas Town Docker Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
# =============================================================================

# ---------------------------------------------------------------------------
# Gas Town Core
# ---------------------------------------------------------------------------

# Version tag for the gastown image (used in docker-compose build)
GT_VERSION=dev

# Path to the Gas Town home directory on the host
# This is where rigs, beads databases, and configs live
GT_HOME=./data/gt

# Spool directory for offline Nostr event buffering
GT_SPOOL_DIR=./data/spool

# SSH key directory for git operations (mounted read-only)
SSH_KEY_DIR=~/.ssh

# ---------------------------------------------------------------------------
# Nostr Configuration
# ---------------------------------------------------------------------------

# Master switch — set to 1 to enable Nostr publishing
GT_NOSTR_ENABLED=1

# Relay URLs (comma-separated)
# Internal relay (within Docker network): ws://relay:7000
# External relays can be added for redundancy
GT_NOSTR_READ_RELAYS=ws://relay:7000
GT_NOSTR_WRITE_RELAYS=ws://relay:7000

# Blossom blob storage servers (comma-separated)
GT_NOSTR_BLOSSOM_SERVERS=http://blossom:8005

# NIP-46 signer configuration
# Type: nip46 (recommended) or local (development only)
GT_NOSTR_SIGNER_TYPE=nip46

# NIP-46 bunker connection URI
# Format: bunker://<signer-pubkey>?relay=wss://relay.example.com&secret=<auth-secret>
GT_NOSTR_BUNKER=

# The Deacon's public key (hex or npub1 format)
# This is the canonical authority pubkey for all Gas Town events
GT_NOSTR_PUBKEY=

# Nostr keys directory (for per-agent identity metadata)
GT_KEYS_DIR=./data/keys

# ---------------------------------------------------------------------------
# Sunset Flags (Dual-Write Migration)
# ---------------------------------------------------------------------------
# Set to 0 to disable local paths once Nostr is validated
# Keep at 1 during initial deployment for safety

# Continue writing to .events.jsonl
GT_EVENTS_LOCAL=1

# Run the local feed curator daemon
GT_FEED_CURATOR=1

# Use local bd dep list for convoy state
GT_CONVOY_LOCAL=1

# ---------------------------------------------------------------------------
# MCP Server (for LAN-hosted LLM agents)
# ---------------------------------------------------------------------------

# Port for the GT MCP tool server
GT_MCP_PORT=9500

# Bearer token for MCP server authentication
# Generate with: openssl rand -hex 32
GT_MCP_TOKEN=

# ---------------------------------------------------------------------------
# Relay Configuration
# ---------------------------------------------------------------------------

# Host port for the Nostr relay WebSocket
RELAY_PORT=7777

# Relay log level (error, warn, info, debug, trace)
RELAY_LOG_LEVEL=info

# Path to custom relay config (optional)
# RELAY_CONFIG=./config/relay.toml

# ---------------------------------------------------------------------------
# Blossom Configuration
# ---------------------------------------------------------------------------

# Host port for the Blossom server
BLOSSOM_PORT=8005

# ---------------------------------------------------------------------------
# Flotilla UI (optional — enable with --profile ui)
# ---------------------------------------------------------------------------

# Path to the Flotilla source directory (for building)
FLOTILLA_PATH=../flotilla-extensions/flotilla

# Flotilla version tag
FLOTILLA_VERSION=latest

# Host port for Flotilla web UI
FLOTILLA_PORT=1847

# Public-facing relay URL (what Flotilla connects to from the browser)
# Use your host IP or domain if accessing from other machines
PUBLIC_RELAY_URL=ws://localhost:7777

# Public-facing Blossom URL
PUBLIC_BLOSSOM_URL=http://localhost:8005

# ---------------------------------------------------------------------------
# Ollama / Local LLM (optional — enable with --profile llm or llm-cpu)
# ---------------------------------------------------------------------------

# Host port for Ollama API
OLLAMA_PORT=11434

# ---------------------------------------------------------------------------
# Git Configuration
# ---------------------------------------------------------------------------

GIT_AUTHOR_NAME=Gas Town
GIT_AUTHOR_EMAIL=gt@gastown.local
GIT_COMMITTER_NAME=Gas Town
GIT_COMMITTER_EMAIL=gt@gastown.local
